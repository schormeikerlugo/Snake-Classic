<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ğŸSnakeğŸ</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1a1f3a">
  <link rel="icon" href="assets/image/icon/icon-192x192.png">
  <link rel="apple-touch-icon" href="assets/image/icon/icon-192x192.png">
  <link rel="stylesheet" href="./styles/main.css">
  <link rel="stylesheet" href="./styles/update.css">
</head>
<body>

  <div id="splash-screen" class="animated-grid-bg">
    <img src="assets/image/logo/logo.png" alt="Snake Game Logo" id="splash-logo">
    <button id="enter-btn">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      Iniciar
    </button>
  </div>

  <div id="menu-view" class="hidden animated-grid-bg">
    <img src="assets/image/logo/logo.png" alt="Snake Game Logo" id="menu-logo">
    <div class="menu-buttons">
      <button id="menu-start">Iniciar Juego</button>
      <button id="menu-how-to-play">CÃ³mo Jugar</button>
      <button id="menu-settings">ConfiguraciÃ³n</button>
      <button id="menu-account">Cuenta</button>
      <button id="menu-credits">CrÃ©ditos</button>
    </div>
    <div id="version-display">v.01</div>
  </div>

  <!-- ğŸ® Vista del Juego -->
  <div id="game-view" class="hidden">
    <!-- ğŸ“Š HUD (PuntuaciÃ³n y Botones de Escritorio) -->
    <div class="hud">
      <button id="back-to-menu-btn">MenÃº</button>
      <button id="start">Reiniciar</button>
      <div class="scores-group">
        <div class="stat">
          <label>Puntos: ğŸ–ï¸</label>
          <span id="score" class="value">0</span>
        </div>
        <div class="stat">
          <label>Record: ğŸ†</label>
          <span id="best" class="value">0</span>
        </div>
      </div>
    </div>

    <div class="game-main-content">
      <!-- Columna de Chat (Izquierda) -->
      <div id="chat-column" class="side-column">
        <h2 class="column-title">Chat en Vivo</h2>
        <div id="chat-messages"></div>
        <form id="chat-form">
          <input type="text" id="chat-input" placeholder="Escribe un mensaje..." required autocomplete="off">
          <button type="submit">Enviar</button>
        </form>
      </div>

      <!-- Columna Central del Juego -->
      <div id="game-column">
        <div class="wrap">
          <!-- ğŸ Tablero de Juego -->
          <div class="board">
            <canvas id="game"></canvas>
            <canvas id="fx"></canvas>
            <div id="paused" class="paused">Respira un poco y continua...</div>
          </div>
        </div>
      </div>

      <!-- Columna de Ranking (Derecha) -->
      <div id="ranking-column" class="side-column">
        <h2 class="column-title">Ranking Global ğŸ†</h2>
        <div id="ranking-container"></div>
      </div>
    </div>

    <!--ğŸ•¹ï¸ Controles MÃ³viles -->
    <div class="mobile-controls">
      <div class="mobile-controls-top-row">
        <button id="mobile-restart-btn">â†»</button>
        <button id="ctrl-up">â–²</button>
        <button id="mobile-pause-btn">II</button>
      </div>
      <div class="middle-row">
        <button id="ctrl-left">â–²</button>
        <button id="ctrl-right">â–²</button>
      </div>
      <div class="down-row">
        <button id="ctrl-down">â–²</button>
      </div>
      <div class="bottom-row">
        <button id="mobile-chat-btn">ğŸ’¬</button>
        <button id="mobile-ranking-btn">ğŸ†</button>
      </div>
    </div>
  </div>

  <!-- ğŸ“± Vistas MÃ³viles -->
  <div id="mobile-chat-view" class="mobile-view">
    <div class="mobile-view-header">
      <h2 class="mobile-view-title">Chat en Vivo</h2>
      <button class="mobile-view-back-btn" data-target="chat">Volver</button>
    </div>
    <div class="mobile-view-content" id="mobile-chat-content">
      <!-- El contenido del chat se moverÃ¡ aquÃ­ dinÃ¡micamente -->
    </div>
  </div>

  <div id="mobile-ranking-view" class="mobile-view">
    <div class="mobile-view-header">
      <h2 class="mobile-view-title">Ranking Global ğŸ†</h2>
      <button class="mobile-view-back-btn" data-target="ranking">Volver</button>
    </div>
    <div class="mobile-view-content" id="mobile-ranking-content">
      <!-- El contenido del ranking se moverÃ¡ aquÃ­ dinÃ¡micamente -->
    </div>
  </div>

  <!-- Modal Structure -->
  <div id="modal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="modal-close" class="modal-close-btn">&times;</button>
      <h2 id="modal-title"></h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <script type="module" src="./js/lib/supabaseClient.js"></script>
  <script type="module" src="./js/features/auth.js"></script>
  <script type="module" src="./js/features/ranking.js"></script>
  <script type="module" src="./js/features/chat.js"></script>
  <script type="module" src="./js/ui/ui.js"></script>
  <script type="module" src="./js/main.js"></script>
</body>
</html>